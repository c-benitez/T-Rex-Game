<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no">
    <title>t-rex game</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <style type="text/css">
      .preview {
        display: inline-block;
        width: 100%;
        margin-top: 100px;
      }
      .game-container {
        margin-top: 15px;
        display: flex;
        justify-content: center;
      }
    </style>
  </head>

  <body>

    <img src="assets/default_200_percent/200-offline-sprite.png" class="preview"></img>
    <div class="game-container">
      <canvas class="game" width="600" height="300"></canvas>
    </div>

    <script>
      const spriteDefinition = {
        CACTUS_LARGE: { x: 652, y: 2 },
        CACTUS_SMALL: { x: 446, y: 2 },
        CLOUD: { x: 166, y: 2 },
        HORIZON: { x: 2, y: 104 },
        MOON: { x: 954, y: 2 },
        PTERODACTYL: { x: 260, y: 2 },
        RESTART: { x: 2, y: 2 },
        TEXT_SPRITE: { x: 1294, y: 2 },
        TREX: { x: 1678, y: 2, w: 88, h: 94 },
        TREX_STEP1: { x: 1854, y: 2, w: 88, h: 94 },
        TREX_STEP2: { x: 1942, y: 2, w: 88, h: 94 },
        STAR: { x: 1276, y: 2 }
      };
      const canvas = document.querySelector(".game");
      const ctx = canvas.getContext("2d");
      const image = document.querySelector(".preview");
      image.onload = renderLoop;

      function renderLoop() {
        ctx.clearRect(0, 0, 600, 300);
        paint();
        if (frame < 1000) {
          window.requestAnimationFrame(renderLoop);
        }
      }

      const state = {
        isCrouching: false,
      };

      setInterval(() => {
          state.isCrouching = !state.isCrouching;
      }, 100);

      function paint() {
        const TREX = state.isCrouching ? spriteDefinition.TREX_STEP1 : spriteDefinition.TREX_STEP2;
        ctx.drawImage(image, TREX.x, TREX.y, TREX.w, TREX.h, 0, 0, TREX.w, TREX.h);
      }
    </script>
  </body>
</html>
